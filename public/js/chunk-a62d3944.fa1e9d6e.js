(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a62d3944"],{"028a":function(e,t,a){"use strict";var r=a("7127"),s=a.n(r);s.a},"2fef":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"flip-card"},[a("div",{staticClass:"flip-card-inner",class:e.loginPage?"":"signupPage"},[a("div",{staticClass:"loginForm"},[a("h1",[e._v("ورود به ترسیم")]),a("form",{staticClass:"registrationForm",on:{submit:function(t){return t.preventDefault(),e.login(t)}}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.user.email,expression:"user.email"}],attrs:{type:"email",placeholder:"email"},domProps:{value:e.user.email},on:{input:function(t){t.target.composing||e.$set(e.user,"email",t.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:e.user.password,expression:"user.password"}],attrs:{type:"password",placeholder:"password"},domProps:{value:e.user.password},on:{input:function(t){t.target.composing||e.$set(e.user,"password",t.target.value)}}}),a("input",{staticClass:"btn btn-green",attrs:{type:"submit",value:"ورود",disabled:!e.validateLoginForm}})]),a("button",{on:{click:function(t){e.loginPage=!1}}},[e._v("ثبت نام")])]),a("div",{staticClass:"signupForm"},[a("h1",[e._v("ثبت نام در ترسیم")]),a("form",{staticClass:"registrationForm",on:{submit:function(t){return t.preventDefault(),e.signup(t)}}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.user.email,expression:"user.email"}],attrs:{type:"email",placeholder:"email"},domProps:{value:e.user.email},on:{input:function(t){t.target.composing||e.$set(e.user,"email",t.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:e.user.password,expression:"user.password"}],attrs:{type:"password",placeholder:"password"},domProps:{value:e.user.password},on:{input:function(t){t.target.composing||e.$set(e.user,"password",t.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:e.user.rpassword,expression:"user.rpassword"}],attrs:{type:"password",placeholder:"repeat password"},domProps:{value:e.user.rpassword},on:{input:function(t){t.target.composing||e.$set(e.user,"rpassword",t.target.value)}}}),a("input",{staticClass:"btn btn-blue",attrs:{type:"submit",value:"ثبت نام",disabled:!e.validateSignupForm}})]),a("button",{on:{click:function(t){e.loginPage=!0}}},[e._v("قبلا ثبت نام کردم")])])])])},s=[],n=a("5530"),i=(a("96cf"),a("1da1")),o={name:"app",data:function(){return{user:{email:"mahdi@toosi.com",password:"2647187",rpassword:"2647187"},loginPage:!0}},methods:{signup:function(){var e=this;if(this.validateSignupForm){var t=this.$FeathersVuex.api.User,a=new t(this.user);a.save().then((function(){e.login()}))}},login:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.validateLoginForm){t.next=11;break}return a=Object(n["a"])({strategy:"local"},e.user),t.prev=2,t.next=5,e.$store.dispatch("auth/authenticate",a).then(function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(a){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=86400,a.expire=(new Date).getTime()+r,localStorage.setItem("userData",JSON.stringify(a)),t.next=5,e.$router.push("/");case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 5:t.next=11;break;case 7:t.prev=7,t.t0=t["catch"](2),r=401==t.t0.code?"ایمیل یا رمز عبور اشتباه است":"خطا در اتصال به سرور",e.$toasted.error(r,{position:"bottom-left",duration:5e3,keepOnHover:!0,iconPack:"fontawesome",icon:"fa-close"});case 11:case"end":return t.stop()}}),t,null,[[2,7]])})))()},validEmail:function(e){var t=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(e)},validLength:function(e){if(e.length>=3)return!0}},computed:{validateLoginForm:function(){var e=this.user;return!(!this.validEmail(e.email)||!this.validLength(e.password))},validateSignupForm:function(){var e=this.user;return!(!this.validEmail(e.email)||!this.validLength(e.password)||e.password!==e.rpassword)}},mounted:function(){}},u=o,l=(a("028a"),a("2877")),p=Object(l["a"])(u,r,s,!1,null,null,null);t["default"]=p.exports},7127:function(e,t,a){}}]);
//# sourceMappingURL=chunk-a62d3944.fa1e9d6e.js.map