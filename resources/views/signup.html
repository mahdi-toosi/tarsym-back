<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <div id="app">
        <form @submit.prevent="login" class="testFrom">
            <input type="email" placeholder="email" v-model="user.email" />
            <input type="password" placeholder="password" v-model="user.password" />
            <input type="submit" value="signup" :disabled="!validateLoginForm" />
        </form>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.11"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.19.2/axios.min.js"></script>
    <script>
        var app = new Vue({
            el: '#app',
            data: {
                user: {
                    email: "mahdi@toosi.com",
                    password: "2647187",
                },
            },
            methods: {
                login() {
                    let url = '/users/',
                        data = {
                            email: this.user.email,
                            password: this.user.password,
                        };


                    if (this.validateLoginForm) {
                        axios.post(url, data).then(res => {
                            console.log('res => ', res);
                        })
                    }
                },
                validEmail: function (email) {
                    var regx = new RegExp(
                        /^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;: \s @ "]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/
                    );
                    return regx.test(email);
                },
                validLength(L) {
                    if (L.length >= 3) {
                        return true;
                    }
                },
            },
            computed: {
                validateLoginForm() {
                    const u = this.user;
                    if (
                        // this.validLength(u.name) &&
                        // u.imgURL &&
                        this.validEmail(u.email) &&
                        this.validLength(u.password)
                        // u.password === u.rpassword
                    ) return true;
                    return false;
                },
            },
            mounted() {},
        })

    </script>
</body>

</html>
